<!-- filepath: c:\Users\princ\Desktop\IMAN\accounts\templates\accounts\donate.html -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Donate - Iman Jibril Foundation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <script src="https://js.paystack.co/v1/inline.js"></script>
  <style>
    html, body {
      background: #faf7e3;
      margin: 0;
      padding: 0;
      width: 100vw;
      max-width: 100vw;
      overflow-x: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .donate-logo {
      display: block;
      margin: 40px auto 10px auto;
      max-width: 220px;
      width: 40%;
    }
    .donate-header {
      text-align: center;
      margin-bottom: 30px;
    }
    .donate-title {
      font-size: 2rem;
      color: #12550f;
      font-weight: bold;
      margin-bottom: 8px;
    }
    .donate-subtitle {
      font-size: 1.1rem;
      color: #39231a;
      margin-bottom: 24px;
    }
    .donate-card-list {
      display: flex;
      flex-wrap: wrap;
      gap: 32px;
      justify-content: center;
      margin-bottom: 30px;
      width: 100%;
      box-sizing: border-box;
    }
    .donate-card {
      flex: 1 1 300px;
      max-width: 350px;
      min-width: 240px;
      box-sizing: border-box;
      margin-bottom: 20px;
      border-radius: 12px;
      background: #f9fafb;
      box-shadow: 0 2px 12px rgba(0,0,0,0.07);
      padding: 24px;
      font-size: 1rem;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .donate-card img {
      max-width: 100%;
      max-height: 180px;
      height: auto;
      border-radius: 8px;
      margin-bottom: 12px;
      object-fit: cover;
    }
    .donate-desc {
      font-size: 1.1rem;
      margin-bottom: 16px;
      color: #39231a;
      font-family: 'Patrick Hand', cursive, Arial, sans-serif;
    }
    .donate-amount {
      background: #f6f3e6;
      border-radius: 30px;
      padding: 12px 0;
      margin-bottom: 12px;
      font-size: 1.1rem;
      color: #12550f;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      width: 100%;
    }
    .donate-card input[type="number"] {
      width: 56px;
      font-size: 1.1rem;
      padding: 6px;
      border-radius: 6px;
      border: 1px solid #d0dd94;
      text-align: center;
      margin: 0 8px;
      background: #fff;
    }
    .donate-btn {
      font-size: 1.1rem;
      padding: 14px 28px;
      width: 100%;
      margin-top: 10px;
      border-radius: 8px;
      background: #12550f;
      color: #fff;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.2s;
    }
    .donate-btn:hover, .donate-btn:focus {
      background: #196c24;
    }
    .donate-info {
      width: 98vw;
      max-width: 850px;
      margin: 0 auto 24px auto;
      background: #f9fafb;
      border-radius: 10px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.07);
      padding: 16px;
      text-align: center;
      font-size: 1.1rem;
      color: #39231a;
    }
    @media (max-width: 900px) {
      .donate-card-list { gap: 18px; }
      .donate-card { max-width: 96vw; }
      .donate-info { max-width: 97vw; }
    }
    @media (max-width: 600px) {
      .donate-logo { max-width: 120px; width: 60vw; margin: 28px auto 12px auto; }
      .donate-title { font-size: 1.4rem; }
      .donate-subtitle { font-size: 1rem; }
      .donate-card-list { flex-direction: column; gap: 18px; padding: 4vw 0 2vw 0; margin: 0; width: 100vw; box-sizing: border-box; overflow-x: unset; }
      .donate-card { min-width: 92vw; max-width: 96vw; width: 94vw; margin: 0 auto; padding: 20px 8px 22px 8px; font-size: 1rem; border-radius: 14px; flex: 0 0 auto; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
      .donate-card img { max-height: 38vw; }
      .donate-desc { font-size: 1.04rem; }
      .donate-amount { font-size: 1.05rem; padding: 10px 0; }
      .donate-card input[type="number"] { width: 42px; font-size: 1rem; padding: 5px; }
      .donate-btn { font-size: 1rem; padding: 13px 0; border-radius: 7px; }
      .donate-info { width: 97vw; font-size: 1.02rem; padding: 11px; margin: 0 auto 18px auto; }
    }
    @media (max-width: 370px) {
      .donate-card { min-width: 97vw; max-width: 97vw; width: 97vw; padding: 11px 3px 15px 3px; }
      .donate-info { font-size: 0.99rem; padding: 7px; }
    }
  </style>
</head>
<body>
<div class="donate-header">
  <a href="{% url 'home' %}">
    <img src="{% static 'images/imanJ.png' %}" alt="Iman Jibril Foundation Logo" class="donate-logo">
  </a>
  <div class="donate-title">Give Confidently</div>
  <div class="donate-subtitle">Support our mission to transform lives across Africa</div>
</div>

<form method="post">
  {% csrf_token %}
  <div class="donate-card-list">
    <!-- Card 1 -->
    <div class="donate-card">
      <img src="{% static 'images/IMG9.jpg' %}" alt="Feed a child">
      <div class="donate-desc">Feed a child for a school year</div>
      <div class="donate-amount">
        GHS 15 X 
        <input type="number" min="1" value="1" id="donate-qty-1" onchange="updateTotal(1, 15)">
        = GHS <span id="donate-total-1">15</span>
      </div>
      <button type="button" class="donate-btn" onclick="payWithPaystack(15, 'donate-qty-1')">Donate</button>
    </div>
    <!-- Card 2 -->
    <div class="donate-card">
      <img src="{% static 'images/IMG7.jpg' %}" alt="Sponsor meals">
      <div class="donate-desc">On your special day (i.e. birthday, anniversary) sponsor at least 100 meals for the day (example: GHS 8 = 100 meals, GHS 16 = 200 meals, GHS 80 = 1000)</div>
      <div class="donate-amount">
        GHS 8 X 
        <input type="number" min="1" value="1" id="donate-qty-2" onchange="updateTotal(2, 8)">
        = GHS <span id="donate-total-2">8</span>
      </div>
      <button type="button" class="donate-btn" onclick="payWithPaystack(8, 'donate-qty-2')">Donate</button>
    </div>
    <!-- Card 3 -->
    <div class="donate-card">
      <img src="{% static 'images/img4.jpg' %}" alt="Build classroom">
      <div class="donate-desc">Help build a new classroom</div>
      <div class="donate-amount">
        GHS 3022 X 
        <input type="number" min="1" value="1" id="donate-qty-3" onchange="updateTotal(3, 3022)">
        = GHS <span id="donate-total-3">3022</span>
      </div>
      <button type="button" class="donate-btn" onclick="payWithPaystack(3022, 'donate-qty-3')">Donate</button>
    </div>
  </div>
  <div class="donate-info">
    Iman Jibril Foundation is accredited and your donation goes directly to supporting children, families, and communities in need. Every contribution makes a real difference!
  </div>
</form>
<script>
function updateTotal(cardNum, unitAmount) {
    var qty = document.getElementById('donate-qty-' + cardNum).value;
    document.getElementById('donate-total-' + cardNum).textContent = unitAmount * qty;
}

function payWithPaystack(unitAmount, qtyInputId) {
    var qty = document.getElementById(qtyInputId).value;
    var amount = unitAmount * qty;
    var handler = PaystackPop.setup({
        key: '{{ PAYSTACK_PUBLIC_KEY }}',
        email: '{{ user.email|default:"guest@email.com" }}',
        amount: amount * 100, // Paystack expects amount in pesewas
        currency: 'GHS', // Ghanaian Cedis
        ref: '' + Math.floor((Math.random() * 1000000000) + 1),
        callback: function(response){
            window.location.href = '/verify-payment/?reference=' + response.reference;
        },
        onClose: function(){
            alert('Payment window closed.');
        }
    });
    handler.openIframe();
}
</script>
<!-- Thank You Popup -->
<div id="thankYouPopup" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(18,85,15,0.12);z-index:9999;justify-content:center;align-items:center;">
  <div style="background:#fff;border-radius:18px;box-shadow:0 2px 24px rgba(18,85,15,0.15);max-width:340px;width:90vw;padding:32px 18px;text-align:center;position:relative;">
    <img src="{% static 'images/imanJ.png' %}" alt="Iman Jibril Foundation Logo" style="width:68px;margin-bottom:18px;">
    <h2 style="color:#12550f;margin-bottom:12px;">Thank You for Donating!</h2>
    <p style="color:#39231a;font-size:1.08rem;margin-bottom:18px;">
      Your generosity helps us transform lives across Africa.<br>
      We appreciate your support!
    </p>
    <button onclick="closeThankYou()" style="background:#12550f;color:#fff;border:none;padding:10px 24px;border-radius:8px;font-size:1rem;cursor:pointer;">Close</button>
  </div>
</div>
</body>
</html>